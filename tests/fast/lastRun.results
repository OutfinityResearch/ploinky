
===== PREPARE STAGE =====
[PASS] Temporary workspace directory exists
[PASS] Repository directory created
[PASS] Agent manifest present
[PASS] Agent entry registered
[PASS] Repository enabled flag recorded
[PASS] Isolated agent workspace created

===== START STAGE =====
[PASS] Service container is running
[PASS] Router port 26414 listening
[PASS] Agent host port 7001 listening
[PASS] Agent port 7001 bound to localhost
[PASS] Router status endpoint responds
[PASS] Agent health endpoint reports ok
[PASS] Container exposes AGENT_NAME
[PASS] Container exposes FAST_TEST_MARKER
[PASS] Agent log file created
[PASS] Persisted data file created

===== Ploinky only var test =====
[PASS] Host-only env var not visible inside container

===== Workspace status command =====
[PASS] Status reports SSO disabled
[PASS] Status reports router listening
[PASS] Status lists testRepo
[PASS] Status lists testAgent manifest
[PASS] Status lists demo manifest
[PASS] Status lists active containers for demo
[PASS] Status lists active containers for testAgent

===== Demo agent dependency tests =====
[PASS] Simulator container is running
[PASS] Moderator container is running
[PASS] Moderator server responds to GET
[PASS] Verify repo 'webmeet' is cloned
[PASS] Verify repo 'vibe1' is cloned

===== MCP tests =====
[PASS] Status check: client status simulator
[PASS] Tool check: client list tools
[PASS] Tool run check: client tool run_simulation -iterations 10

===== RoutingServer aggregation test =====
[PASS] Aggregation check: router server mcp aggregation

===== Manifest Environment =====
[PASS] Variable MY_TEST_VAR from manifest is present after start

===== Install Command Verification =====
[PASS] Install command creates marker file (verified via shell)

===== Global Agent Verification =====
[PASS] Global agent working directory is the test root

===== Devel Agent Verification =====
[PASS] Devel agent working directory is the repo source

===== STOP STAGE =====
[PASS] Container exists after stop
[PASS] Container is no longer running
[PASS] Router port 26414 closed
[PASS] Agent port 7001 closed
[PASS] Manual persistence marker retained
[PASS] Agent data file retained

===== START AGAIN STAGE =====
[PASS] Service container is running
[PASS] Router port 26414 listening
[PASS] Agent host port 7001 listening
[PASS] Agent port 7001 bound to localhost
[PASS] Router status endpoint responds
[PASS] Agent health endpoint reports ok
[PASS] Container exposes AGENT_NAME
[PASS] Container exposes FAST_TEST_MARKER
[PASS] Agent log file created
[PASS] Persisted data file created

===== Ploinky only var test =====
[PASS] Host-only env var not visible inside container

===== Workspace status command =====
[PASS] Status reports SSO disabled
[PASS] Status reports router listening
[PASS] Status lists testRepo
[PASS] Status lists testAgent manifest
[PASS] Status lists demo manifest
[PASS] Status lists active containers for demo
[PASS] Status lists active containers for testAgent

===== Demo agent dependency tests =====
[PASS] Simulator container is running
[PASS] Moderator container is running
[PASS] Moderator server responds to GET
[PASS] Verify repo 'webmeet' is cloned
[PASS] Verify repo 'vibe1' is cloned

===== MCP tests =====
[PASS] Status check: client status simulator
[PASS] Tool check: client list tools
[PASS] Tool run check: client tool run_simulation -iterations 10

===== RoutingServer aggregation test =====
[PASS] Aggregation check: router server mcp aggregation

===== Manifest Environment =====
[PASS] Variable MY_TEST_VAR from manifest is present after start

===== Install Command Verification =====
[PASS] Install command creates marker file (verified via shell)

===== Global Agent Verification =====
[PASS] Global agent working directory is the test root

===== Devel Agent Verification =====
[PASS] Devel agent working directory is the repo source
[PASS] Persistence marker survived restart
[PASS] Agent data file still present after restart
[PASS] Agent data file retains initialization signature
[PASS] Dynamic APP_NAME update without restart
[PASS] Dynamic WEBTTY_SHELL update without restart
[PASS] Dynamic SSO_CLIENT_SECRET update without restart

===== Manifest Environment =====
[PASS] Variable MY_TEST_VAR from manifest is present after start again

===== RESTART STAGE =====
[PASS] Service container is running
[PASS] Router port 26414 listening
[PASS] Agent host port 7001 listening
[PASS] Router status endpoint responds
[PASS] Agent health endpoint reports ok
[PASS] Container exposes AGENT_NAME
[PASS] Container exposes FAST_TEST_MARKER
[PASS] Agent log file created
[PASS] Persisted data file created
[PASS] Container PID changed after restart
[PASS] Persistence marker retained after restart

===== Manifest Environment =====
[PASS] Variable MY_TEST_VAR from manifest is present after restart

===== DESTROY STAGE =====
[PASS] Service container removed
[PASS] Temporary workspace directory deleted
[PASS] Agent log removed with workspace
[PASS] Persistence marker removed with workspace

===== TEST SUMMARY =====
[PASS] All tests passed!
